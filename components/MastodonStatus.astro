---
import MicroBlog from "./MicroBlog.astro";
import MastodonLogo from "./MastodonLogo.astro";
import ImageGrid from "./ImageGrid.astro";
import Video from "./Video.astro";
import Poll from "./Poll.astro";
import AudioPlayer from "./AudioPlayer.astro";
import type { MastodonStatusProps } from "../controllers/cache_mastodon_status";
type Props = MastodonStatusProps
const props = Astro.props

---

<MicroBlog {...props}>
  <a href="https://joinmastodon.org/" slot="logo"><MastodonLogo/></a>
  <div slot="supplemental">
    {props.images && Boolean(props.images?.length) && <ImageGrid media={props.images}/>}
    {props.video && <Video src={props.video.src} poster={props.video.poster}/>}
    {props.poll && <Poll {...props.poll}/>}
    {props.audio && <AudioPlayer {...props.audio}/>}
  </div>
  <div slot="metadata">
    · 
    <span><a href={`${props.url}/reblogs`} class="no-underline"><span class="font-bold">{props.reblogsCount}</span> Boosts</a></span> · 

    <span><a href={`${props.url}/favourites`} class="no-underline"><span class="font-bold">{props.favouritesCount}</span> Favourites</a></span> · 

    <span><a href={`${props.url}`} class="no-underline"><span class="font-bold">{props.repliesCount}</span> Replies</a></span>
  </div>
</MicroBlog>