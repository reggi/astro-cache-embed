---
import Tweet from './Tweet.astro';
import { cacheTweet, type CacheTweetOptions } from '../controllers/cache_tweet'

type Props = CacheTweetOptions & {
  href: string
}

const props = Astro.props
const proxy = props.proxy || 'nitter.net' // proxy is coming in as undefined
const options = { ...props, proxy }
const data = await cacheTweet(Astro.props.href, options)

---

<Tweet {...data}/>